{% extends "layout.html" %}
{% block title %}7ela9.com - Find & Book Your Next Coiffeur Appointment{% endblock %}
{% block content %}

<!-- Redesigned Minimal & Premium Styles -->
<style>
    :root {
        --accent-pink: #FF69B4;
        --accent-pink-dark: #e05599;
    }

    /* Modern Mesh Gradient Background */
    .bg-mesh {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: -1;
        background-color: #0a0a0c;
        background-image: 
            radial-gradient(at 0% 0%, rgba(255, 105, 180, 0.08) 0px, transparent 50%),
            radial-gradient(at 100% 0%, rgba(255, 105, 180, 0.05) 0px, transparent 50%);
    }

    .hero-title {
        background: linear-gradient(to right, #fff, #bbb);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
    }

    .glass-surface {
        background: rgba(255, 255, 255, 0.03);
        backdrop-filter: blur(12px);
        border: 1px solid rgba(255, 255, 255, 0.08);
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .glass-surface:hover {
        border-color: rgba(255, 105, 180, 0.3);
        background: rgba(255, 255, 255, 0.05);
    }

    .cta-primary {
        background: var(--accent-pink);
        box-shadow: 0 10px 20px -10px rgba(255, 105, 180, 0.5);
    }

    .cta-primary:hover {
        background: var(--accent-pink-dark);
        transform: translateY(-2px);
    }

    .cta-secondary {
        border: 1px solid rgba(255, 255, 255, 0.2);
    }

    .cta-secondary:hover {
        background: rgba(255, 255, 255, 0.05);
        border-color: var(--accent-pink);
        color: var(--accent-pink);
        transform: translateY(-2px);
    }

    /* Animation for sections */
    .reveal {
        animation: reveal 0.8s ease forwards;
    }

    @keyframes reveal {
        from { opacity: 0; transform: translateY(20px); }
        to { opacity: 1; transform: translateY(0); }
    }
</style>

<div class="bg-mesh"></div>

<!-- Data relay for JS to prevent linter errors -->
<div id="js-data-relay" 
     data-authenticated="{{ (current_user is not none and current_user.id is not none) | tojson }}"
     class="hidden"></div>

<div class="relative z-10 container mx-auto px-6 pt-24 pb-12">
    
    <!-- Hero Section: Clean & Bold -->
    <header class="text-center mb-24 reveal">
        <div class="inline-block px-4 py-1.5 mb-6 text-xs font-semibold tracking-widest uppercase text-hot-pink bg-pink-500/10 rounded-full border border-pink-500/20">
            {{ _('TITLE_FUTURE') }}
        </div>
        <h1 class="text-5xl md:text-7xl font-bold mb-6 hero-title tracking-tight leading-tight">
            Elevate Your <span class="text-hot-pink italic font-serif">Style</span> Experience.
        </h1>
        <p class="text-lg md:text-xl text-gray-400 max-w-2xl mx-auto mb-10 leading-relaxed font-light">
            {{ _('SUBTITLE_CONNECT') }}
        </p>
        <div class="flex flex-col sm:flex-row justify-center items-center gap-4">
            <a href="{{ url_for('signup_client') }}" class="cta-primary w-full sm:w-auto px-10 py-4 rounded-xl text-white font-semibold transition-all">
                {{ _('START_AS_CLIENT') }}
            </a>
            <a href="{{ url_for('signup_coiffeur') }}" class="cta-secondary w-full sm:w-auto px-10 py-4 rounded-xl text-white font-semibold transition-all">
                {{ _('JOIN_AS_COIFFEUR') }}
            </a>
        </div>
    </header>

    <!-- Platform Values: Simplified Grid -->
    <section class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-32 reveal" style="animation-delay: 0.2s;">
        <div class="glass-surface p-8 rounded-2xl">
            <div class="w-12 h-12 bg-pink-500/10 rounded-xl flex items-center justify-center mb-6">
                <svg data-lucide="sparkles" class="w-6 h-6 text-hot-pink"></svg>
            </div>
            <h3 class="text-xl font-bold text-white mb-3">{{ _('TALENT_SHOWCASE_TITLE') }}</h3>
            <p class="text-gray-400 text-sm leading-relaxed">{{ _('TALENT_SHOWCASE_TEXT') }}</p>
        </div>

        <div class="glass-surface p-8 rounded-2xl">
            <div class="w-12 h-12 bg-pink-500/10 rounded-xl flex items-center justify-center mb-6">
                <svg data-lucide="calendar" class="w-6 h-6 text-hot-pink"></svg>
            </div>
            <h3 class="text-xl font-bold text-white mb-3">{{ _('BOOKING_SYSTEM_TITLE') }}</h3>
            <p class="text-gray-400 text-sm leading-relaxed">{{ _('BOOKING_SYSTEM_TEXT') }}</p>
        </div>

        <div class="glass-surface p-8 rounded-2xl">
            <div class="w-12 h-12 bg-pink-500/10 rounded-xl flex items-center justify-center mb-6">
                <svg data-lucide="navigation" class="w-6 h-6 text-hot-pink"></svg>
            </div>
            <h3 class="text-xl font-bold text-white mb-3">{{ _('MOBILE_STYLIST_NETWORK_TITLE') }}</h3>
            <p class="text-gray-400 text-sm leading-relaxed">{{ _('MOBILE_STYLIST_NETWORK_TEXT') }}</p>
        </div>
    </section>

    <!-- Core Services -->
    <section class="mb-32 reveal" style="animation-delay: 0.3s;">
        <div class="flex flex-col md:flex-row justify-between items-end mb-12 gap-6">
            <div class="max-w-xl">
                <h2 class="text-3xl md:text-4xl font-bold text-white mb-4">{{ _('CORE_SERVICES') }}</h2>
                <p class="text-gray-400">Discover a range of professional beauty services tailored to your lifestyle.</p>
            </div>
        </div>
        
        <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
            <div class="group relative p-6 rounded-2xl bg-gradient-to-b from-white/5 to-transparent border border-white/5 hover:border-pink-500/50 transition-all">
                <svg data-lucide="scissors" class="w-8 h-8 text-hot-pink mb-4 opacity-70 group-hover:opacity-100 transition-opacity"></svg>
                <h3 class="text-xl font-semibold text-white mb-2">{{ _('CLASSIC_APPOINTMENTS_TITLE') }}</h3>
                <p class="text-gray-500 text-sm">{{ _('CLASSIC_APPOINTMENTS_TEXT') }}</p>
            </div>
            <div class="group relative p-6 rounded-2xl bg-gradient-to-b from-white/5 to-transparent border border-white/5 hover:border-pink-500/50 transition-all">
                <svg data-lucide="camera" class="w-8 h-8 text-hot-pink mb-4 opacity-70 group-hover:opacity-100 transition-opacity"></svg>
                <h3 class="text-xl font-semibold text-white mb-2">{{ _('DIGITAL_PORTFOLIO_TITLE') }}</h3>
                <p class="text-gray-500 text-sm">{{ _('DIGITAL_PORTFOLIO_TEXT') }}</p>
            </div>
            <div class="group relative p-6 rounded-2xl bg-gradient-to-b from-white/5 to-transparent border border-white/5 hover:border-pink-500/50 transition-all">
                <svg data-lucide="zap" class="w-8 h-8 text-hot-pink mb-4 opacity-70 group-hover:opacity-100 transition-opacity"></svg>
                <h3 class="text-xl font-semibold text-white mb-2">{{ _('PRICE_BIDDING_TITLE') }}</h3>
                <p class="text-gray-500 text-sm">{{ _('PRICE_BIDDING_TEXT') }}</p>
            </div>
        </div>
    </section>

    <!-- Process Section: Modern Horizontal/Vertical Steps -->
    <section class="mb-32 reveal" style="animation-delay: 0.4s;">
        <div class="glass-surface p-12 rounded-3xl">
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-20">
                <!-- Clients -->
                <div>
                    <h3 class="text-2xl font-bold text-white mb-8 flex items-center">
                        <span class="w-8 h-8 rounded-lg bg-hot-pink/20 text-hot-pink flex items-center justify-center mr-3 text-sm">
                            <svg data-lucide="user" class="w-4 h-4"></svg>
                        </span>
                        {{ _('AS_CLIENT') }}
                    </h3>
                    <div class="space-y-8">
                        <div class="flex gap-4">
                            <span class="text-hot-pink/30 font-bold text-2xl">01</span>
                            <div>
                                <h4 class="text-white font-semibold mb-1">{{ _('CLIENT_1_TITLE') }}</h4>
                                <p class="text-gray-500 text-sm">{{ _('CLIENT_1_TEXT') }}</p>
                            </div>
                        </div>
                        <div class="flex gap-4">
                            <span class="text-hot-pink/30 font-bold text-2xl">02</span>
                            <div>
                                <h4 class="text-white font-semibold mb-1">{{ _('CLIENT_3_TITLE') }}</h4>
                                <p class="text-gray-500 text-sm">{{ _('CLIENT_3_TEXT') }}</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Stylists -->
                <div>
                    <h3 class="text-2xl font-bold text-white mb-8 flex items-center">
                        <span class="w-8 h-8 rounded-lg bg-hot-pink/20 text-hot-pink flex items-center justify-center mr-3 text-sm">
                            <svg data-lucide="scissors" class="w-4 h-4"></svg>
                        </span>
                        {{ _('AS_HAIRDRESSER') }}
                    </h3>
                    <div class="space-y-8">
                        <div class="flex gap-4">
                            <span class="text-hot-pink/30 font-bold text-2xl">01</span>
                            <div>
                                <h4 class="text-white font-semibold mb-1">{{ _('HAIRDRESSER_1_TITLE') }}</h4>
                                <p class="text-gray-500 text-sm">{{ _('HAIRDRESSER_1_TEXT') }}</p>
                            </div>
                        </div>
                        <div class="flex gap-4">
                            <span class="text-hot-pink/30 font-bold text-2xl">02</span>
                            <div>
                                <h4 class="text-white font-semibold mb-1">{{ _('HAIRDRESSER_3_TITLE') }}</h4>
                                <p class="text-gray-500 text-sm">{{ _('HAIRDRESSER_3_TEXT') }}</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    
    <!-- Stylist Showcase -->
    <section class="mb-32 reveal" style="animation-delay: 0.5s;">
        <div class="text-center mb-16">
            <h2 class="text-4xl font-bold text-white mb-4">{{ _('FEATURED_STYLISTS') }}</h2>
            <p class="text-gray-400 max-w-xl mx-auto">{{ _('SUBTITLE_CONNECT').split('.')[0] }}. Browse top talent in your city.</p>
        </div>
        
        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6">
            {% for stylist in stylists %}
            <!-- Fixed onclick to avoid linter error in VS Code/Canvas -->
            <div data-id="{{ stylist.user.id }}" 
                onclick="handleProfileClick(this.getAttribute('data-id'))" 
                class="group glass-surface rounded-2xl p-6 cursor-pointer text-center">
                <div class="relative w-24 h-24 mx-auto mb-6">
                    <div class="absolute inset-0 bg-hot-pink blur-md opacity-20 group-hover:opacity-40 transition-opacity"></div>
                    <img src="{{ stylist.coiffeur.profile_image if stylist.coiffeur.profile_image else 'https://placehold.co/100x100/111/FF69B4?text=' + stylist.user.name[0] }}" 
                         alt="{{ stylist.user.name }}" class="relative w-24 h-24 rounded-2xl object-cover border border-white/10">
                </div>
                
                <h3 class="text-lg font-bold text-white mb-1 group-hover:text-hot-pink transition-colors">{{ stylist.user.name }}</h3>
                <p class="text-xs text-gray-500 mb-4 uppercase tracking-wider">{{ stylist.user.city }} â€¢ {{ stylist.coiffeur.category }}</p>
                
                <div class="flex justify-center items-center gap-1 mb-6">
                    {% for i in range(5) %}
                        <svg data-lucide="star" class="w-3.5 h-3.5 {{ 'text-hot-pink fill-hot-pink' if i < stylist.rating|round(0, 'floor') else 'text-gray-700' }}"></svg>
                    {% endfor %}
                    <span class="text-gray-500 text-xs ml-1">({{ stylist.rating|round(1) }})</span>
                </div>

                <button class="w-full py-2.5 rounded-xl border border-white/10 text-xs font-semibold text-white group-hover:bg-hot-pink group-hover:border-hot-pink transition-all">
                    {{ _('VIEW_PORTFOLIO') }}
                </button>
            </div>
            {% else %}
                <p class="col-span-full text-center text-gray-500 italic">{{ _('NO_STYLISTS_FOUND') }}</p>
            {% endfor %}
        </div>
        
        <div class="text-center mt-16">
            <a href="{{ url_for('search_stylists') }}" class="inline-flex items-center gap-2 px-8 py-3 rounded-xl border border-white/10 text-white hover:text-hot-pink hover:border-hot-pink transition-all">
                {{ _('VIEW_ALL_STYLISTS') }} <svg data-lucide="arrow-right" class="w-4 h-4"></svg>
            </a>
        </div>
    </section>

</div>

<!-- Auth Modal (Logic Preserved) -->
<div id="auth-modal" class="fixed inset-0 bg-black/90 backdrop-blur-md z-[100] hidden flex items-center justify-center p-6 transition-opacity duration-300">
    <div class="glass-surface w-full max-w-md p-10 rounded-3xl relative">
        <button onclick="closeAuthModal()" class="absolute top-6 right-6 text-gray-500 hover:text-white transition">
            <svg data-lucide="x" class="w-6 h-6"></svg>
        </button>
        
        <h2 class="text-2xl font-bold text-white mb-2 text-center">{{ _('ACCESS_REQUIRED') }}</h2>
        <p class="text-gray-400 mb-8 text-center text-sm">{{ _('LOGIN_TO_VIEW') }}</p>

        <form method="POST" action="{{ url_for('login') }}" class="space-y-4">
            <input type="hidden" name="redirect_url" id="modal-redirect-url">
            
            <div class="space-y-1.5">
                <label class="text-xs font-semibold text-gray-400 ml-1 uppercase tracking-wider">{{ _('EMAIL') }}</label>
                <input type="email" name="email" required
                       class="w-full p-4 rounded-xl bg-white/5 border border-white/10 text-white focus:outline-none focus:border-hot-pink transition-colors">
            </div>
            
            <div class="space-y-1.5">
                <label class="text-xs font-semibold text-gray-400 ml-1 uppercase tracking-wider">{{ _('PASSWORD') }}</label>
                <input type="password" name="password" required
                       class="w-full p-4 rounded-xl bg-white/5 border border-white/10 text-white focus:outline-none focus:border-hot-pink transition-colors">
            </div>
            
            <button type="submit" class="w-full cta-primary text-white font-bold py-4 rounded-xl mt-4 transition-all">
                {{ _('LOGIN') }}
            </button>
        </form>

        <div class="mt-8 text-center border-t border-white/5 pt-8">
            <a href="{{ url_for('signup_client') }}" class="text-hot-pink hover:text-white text-sm font-semibold transition-colors">
                {{ _('NEW_CLIENT_SIGNUP') }}
            </a>
            <div class="mt-2">
                <a href="{{ url_for('signup_coiffeur') }}" class="text-gray-500 hover:text-gray-300 text-xs transition-colors">
                    {{ _('SIGN_UP') }} {{ _('AS_HAIRDRESSER') }}
                </a>
            </div>
        </div>
    </div>
</div>

<script>
    // Using a data-relay element to hide Jinja from the JS linter
    const relay = document.getElementById('js-data-relay');
    const IS_AUTHENTICATED = relay ? JSON.parse(relay.getAttribute('data-authenticated')) : false;
    
    const AUTH_MODAL = document.getElementById('auth-modal');
    const REDIRECT_URL_INPUT = document.getElementById('modal-redirect-url');
    
    function getProfileUrl(coiffeurId) {
        return `/profile/${coiffeurId}`;
    }

    function handleProfileClick(coiffeurId) {
        if (IS_AUTHENTICATED) {
            window.location.href = getProfileUrl(coiffeurId);
        } else {
            openAuthModal(coiffeurId);
        }
    }
    
    function openAuthModal(coiffeurId) {
        REDIRECT_URL_INPUT.value = getProfileUrl(coiffeurId);
        AUTH_MODAL.classList.remove('hidden');
    }
    
    function closeAuthModal() {
        AUTH_MODAL.classList.add('hidden');
    }
    
    document.addEventListener('DOMContentLoaded', () => {
        lucide.createIcons();
        if (AUTH_MODAL) {
            AUTH_MODAL.addEventListener('click', (e) => {
                if (e.target === AUTH_MODAL) {
                    closeAuthModal();
                }
            });
        }
    });
</script>

{% endblock %}